\documentclass{beamer}
\usepackage{fancyvrb}
\usepackage{url}
\usepackage{color}
\usepackage[normalem]{ulem}
\usepackage{soul}

\newcommand\slide[2]{
\begin{frame}[fragile=singleslide]{#1}
#2
\end{frame}
}

\newcommand\cmd[1]{{\tt \textbackslash #1}}

\newcommand\ex[1]{\colorbox{red}{\color{white} #1}}
\newcommand\trythis{\ex{Try this.}\ }
\newcommand\shell[1]{\colorbox{black}{\color{green} \tt #1}}
\newcommand\sample[1]{{\tt #1}}

\DeclareUrlCommand\curl{%
  \renewcommand\UrlFont{\ttfamily\color{blue}}%
  \renewcommand\UrlLeft{\uline\bgroup}%
  \renewcommand\UrlRight{\egroup}}


\mode<presentation>
{
  \usetheme{Berkeley}
}

\title{\LaTeX~tutorial}
\author{I.~Holmes}
\institute{
  Department of Bioengineering\\
  University of California, Berkeley}

\begin{document}

%%%
\begin{frame}
  \titlepage
\end{frame}

%%%
\slide{Outline}{\tableofcontents}

%%%
\begin{frame}[fragile=singleslide]{Key}
\begin{enumerate}
\item \ex{Exercises in white on red}
\item \shell{Shell commands in green type on black}
\item URLs in blue: \curl{http://tinyurl.com/texroll}
\item Source code in boxes
\end{enumerate}
\begin{Verbatim}[frame=single]
This is some LaTeX source code
\end{Verbatim}

\ex{Try the URL now!}
}

\section{Why \LaTeX?}

%%%
\slide{\LaTeX~advocacy}{
  \begin{enumerate}
    \item It's free, portable, open source \& extensible
    \item Source files are plain text, revision control easier
    \item Typesetting is {\em much} better, especially math
    \item Style changes are easier
    \item {\bf Separation of form and content}
  \end{enumerate}
}

%%%
\slide{\LaTeX~criticism}{
  \begin{enumerate}
    \item It's the worst programming language ever
    \item Many things you just can't do
    \item Syntax is horrible
    \item Compilation from source is almost impossible
    \item WYSIWYG editors suck
  \end{enumerate}
}

\section{Hello World}

%%%
\begin{frame}[fragile=singleslide]{helloworld.tex}
\begin{Verbatim}[frame=single]
\documentclass{article}
\title{Marmosets Are Great}
\author{Ian Holmes}
\begin{document}
\maketitle
\abstract{A short treatise on marmosets.}
\section{Introduction}
Marmosets ({\em Callitrichidae})
are {\bf New World Monkeys}.
\end{document}
\end{Verbatim}
Compile with \shell{pdflatex helloworld.tex}

\trythis
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Section references}
Can use \cmd{label} and \cmd{ref} as follows:
\begin{Verbatim}[frame=single]
\section{Introduction}
\label{intro}
Marmosets are New World Monkeys.

\section{Geography}
Marmosets are found in the New World,
as mentioned in Section~\ref{intro}.
\end{Verbatim}
Note tilde \sample{\~{}} between \sample{Section} and \cmd{ref}: prevents linebreak.

\ex{Add a section or two, and recompile.}
}

\section{Makefiles}

%%%
\begin{frame}[fragile=singleslide]{Makefiles}
If you change the section numbers, you will have to re-run \shell{pdflatex}.
Consequently, it's common to run the program twice.
Can do this with a Makefile:
\begin{Verbatim}[frame=single]
helloworld.pdf: helloworld.tex
	pdflatex helloworld.tex
	pdflatex helloworld.tex
\end{Verbatim}

General form of Makefile stanza:
\begin{Verbatim}[frame=single]
TARGET: DEPENDENCIES
  <TAB> COMMANDS
\end{Verbatim}
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Make command-line usage}
\begin{itemize}
\item General: \shell{make helloworld.pdf}
\item Force rebuild: \shell{make -B helloworld.pdf}
\item Dry run: \shell{make -n helloworld.pdf}
\end{itemize}

By default, \shell{make} just builds first target in Makefile.
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Makefiles and replicability}

Titus Brown's checklist for paper replicability:
\begin{itemize}
\item a link to the paper itself, in preprint form, stored at arXiv;
\item a tutorial for running the software on a Linux machine hosted in the Amazon cloud;
\item a git repository for the software itself (hosted on github);
\item a git repository for the LaTeX paper and analysis scripts, including an ipython notebook for generating the figures;
\item instructions on how to start up an EC2 cloud instance, install the software and paper pipeline, and build most of the analyses and all of the figures from scratch;
\item the data necessary to run the pipeline;
\item some of the output data discussed in the paper.
\end{itemize}
\curl{http://ivory.idyll.org/blog/replication-i.html}

\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Pseudotargets and variables}
\begin{Verbatim}[frame=single]
MAIN = helloworld

all: $(MAIN).pdf

%.pdf: %.tex
	pdflatex $<
	pdflatex $<
        open $@

clean:
	rm *.toc *.log *.out *.pdf *.aux *~
\end{Verbatim}

\trythis
Use \shell{make}, \shell{make -n} and \shell{make -B}.
\end{frame}


\section{Styling}

%%%
\begin{frame}[fragile=singleslide]{Comments, escapes, styling}
\begin{Verbatim}[frame=single]
% Comments
Actual percent sign: 100\%
Other escapes: \_, \&
Tilde escape: \~{}

``Pretty quotation marks''

Empty line signals new paragraph.

Space: \quad Explicit line \\ break
\end{Verbatim}

Can you get {\bf bold}, {\em italic} \& {\tt typewriter} fonts?

\ex{Google these typefaces.}
\end{frame}

\slide{Typefaces}{
\begin{tabular}{ll}
\sample{\{\cmd{bf} Bold\}} & {\bf Bold} \\
\sample{\{\cmd{em} Italic\}} & {\em Italic} \\
\sample{\{\cmd{tt} Typewriter\}} & {\tt Typewriter}
\end{tabular}
}


%%%
\begin{frame}[fragile=singleslide]{Lists}
\begin{Verbatim}[frame=single]
List of books about wizard school
\begin{itemize}
\item Earthsea
\item Harry Potter
\item The Magicians
\item The Once and Future King
\end{itemize}
\end{Verbatim}
\trythis

Also try \cmd{enumerate} instead of \cmd{itemize},
and try nesting lists inside other lists.

\ex{How many levels deep can you nest?}
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Tables}
\begin{tabular}{rcl}
Right-justified & Centered & Left-justified \\
\hline
School vouchers & Science & Public education \\
Defense spending & Trade deals & Aid programs
\end{tabular}

\begin{Verbatim}[frame=single]
\begin{tabular}{rcl}
Right-justified & Centered & Left-justified \\
\hline
School vouchers & Science & Public education \\
Defense spending & Trade deals & Aid programs
\end{tabular}
\end{Verbatim}

\ex{Time to add a table.}

Make a table with some facts about marmosets.
Or pick another vertebrate from \curl{hgdownload.cse.ucsc.edu}
and make a table about it.
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Table captions and references}
\begin{Verbatim}[frame=single]
\begin{table}
\begin{tabular}
...
\end{tabular}
\caption{
 \label{MarmosetFacts}
 A table of marmoset facts.
}
\end{table}

For marmoset data, see Table~\ref{MarmosetFacts}.
\end{Verbatim}
\end{frame}

\section{Mathematics}

%%%
\begin{frame}[fragile=singleslide]{Equations}
\begin{Verbatim}[frame=single]
Inline: $a = 3$, $b = 5$

Non-numbered:
\[
y = ax + b
\]

\end{Verbatim}

Inline: $a = 3$, $b = 5$

Non-numbered:
\[
y = ax + b
\]
\end{frame}



%%%
\begin{frame}[fragile=singleslide]{Equations}
\begin{Verbatim}[frame=single]
Numbered (Equation~\ref{Gaussian}):
\begin{equation}
x \sim {\cal N}(\mu,\sigma):
\quad
P(x' \leq x < x' + dx') =
\frac{1}{\sqrt{2 \pi \sigma^2}}
e^{-\frac{(x'-\mu)^2}{2\sigma^2}} dx'
\label{Gaussian}
\end{equation}
\end{Verbatim}

Numbered (Equation~\ref{Gaussian}):
\begin{equation}
x \sim {\cal N}(\mu,\sigma):
\quad
P(x' \leq x < x' + dx') =
\frac{1}{\sqrt{2 \pi \sigma^2}}
e^{-\frac{(x'-\mu)^2}{2\sigma^2}} dx'
\label{Gaussian}
\end{equation}

\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Equations}
\begin{Verbatim}[frame=single]
Numbered (Equation~\ref{Gaussian}):
\begin{equation}
x \sim {\cal N}(\mu,\sigma):
\quad
P(x' \leq x < x' + dx') =
\frac{1}{\sqrt{2 \pi \sigma^2}}
e^{-\frac{(x'-\mu)^2}{2\sigma^2}} dx'
\label{Gaussian}
\end{equation}
\end{Verbatim}

\ex{Google ``Latex math symbols''.}

\ex{Write out another distribution e.g. Poisson.}
\end{frame}


%%%
\begin{frame}[fragile=singleslide]{Brackets, arrays}
\begin{Verbatim}[frame=single]
\[
\left(
 \begin{array}{c}
  n \\
  k
 \end{array}
 \right)
= n \times (n-1) \times (n-2) \ldots \times (n-k)
= \frac{n!}{k!}
\]
\end{Verbatim}

\[
\left(
 \begin{array}{c}
  n \\
  k
 \end{array}
\right)
= n \times (n-1) \times (n-2)
   \times \ldots \times (n-k)
= \frac{n!}{k!}
\]
\end{frame}


%%%
\begin{frame}[fragile=singleslide]{Macro commands}
\begin{Verbatim}[frame=single]
\newcommand\binomial[2]{
\left(
 \begin{array}{c}
  #1 \\
  #2
 \end{array}
 \right)
}
\[
 \binomial{5}{2} = 5 \times 4 \times 3 = 60
\]
\end{Verbatim}

\newcommand\binomial[2]{
\left(
 \begin{array}{c}
  #1 \\
  #2
 \end{array}
 \right)
}
$\binomial{5}{2} = 5 \times 4 \times 3 = 60$
\quad \trythis
\end{frame}


%%%
\begin{frame}[fragile=singleslide]{More arrays; text in math environments}
\begin{Verbatim}[frame=single]
\[
H(x) = \left\{
 \begin{array}{ll}
  0 & \mbox{for $x < 0$} \\
  1 & \mbox{for $x \geq 0$}
 \end{array}
\right.
\]
\end{Verbatim}

\[
H(x) = \left\{
 \begin{array}{ll}
  0 & \mbox{for $x < 0$} \\
  1 & \mbox{for $x \geq 0$}
 \end{array}
\right.
\]
\end{frame}


%%%
\begin{frame}[fragile=singleslide]{Equation arrays}
\begin{Verbatim}[frame=single]
\begin{eqnarray}
x_1 & = & 1 \\
x_2 & = & 1 \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray}
\end{Verbatim}
\begin{eqnarray}
x_1 & = & 1 \\
x_2 & = & 1 \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray}
\end{frame}

%%%
\begin{frame}[fragile=singleslide]{Equation arrays (cleaner numbering)}
\begin{Verbatim}[frame=single]
\begin{eqnarray}
x_1 & = & 1 \nonumber \\
x_2 & = & 1 \nonumber \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray}
\end{Verbatim}
\begin{eqnarray}
x_1 & = & 1 \nonumber \\
x_2 & = & 1 \nonumber \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray}
\end{frame}


%%%
\begin{frame}[fragile=singleslide]{Equation arrays (no numbering)}
\begin{Verbatim}[frame=single]
\begin{eqnarray*}
x_1 & = & 1 \\
x_2 & = & 1 \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray*}
\end{Verbatim}
\begin{eqnarray*}
x_1 & = & 1 \\
x_2 & = & 1 \\
x_{n+2} & = & x_n + x_{n+1}
\end{eqnarray*}
\end{frame}


\end{document}
